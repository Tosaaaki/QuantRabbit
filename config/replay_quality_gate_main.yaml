# Replay quality gate defaults for scripts/replay_exit_workers.py backend.
# Worker filters:
#   - Strategy tag/name: TrendMA, BB_RSI, ...
#   - __overall__
#   - pocket:<name> (example: pocket:micro)
#   - source:<name> (example: source:strategy)

ticks_glob: "logs/replay/USD_JPY/USD_JPY_ticks_*.jsonl"

workers:
  - TrendMA
  - BB_RSI

replay:
  backend: exit_workers_main
  no_hard_sl: true
  no_hard_tp: false
  exclude_end_of_replay: true
  realistic: true
  fast_only: false
  sp_only: false
  sp_live_entry: false
  disable_macro: false
  no_main_strategies: false
  fill_mode: next_tick

gates:
  default:
    min_train_trades: 20
    min_test_trades: 10
    min_test_pf: 1.0
    min_test_win_rate: 0.50
    min_test_total_pips: 0.0
    max_test_drawdown_pips: 45.0
    min_pf_stability_ratio: 0.60
  workers:
    # Example:
    # TrendMA:
    #   min_test_pf: 1.05

walk_forward:
  train_files: 4
  test_files: 1
  step_files: 1
  min_fold_pass_rate: 0.70
