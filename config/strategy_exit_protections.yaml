# Strategy-specific BE trail / TP move overrides.
# Values are in pips and seconds.

defaults:
  apply_when_soft_tp: true
  neg_exit:
    enabled: true
    allow_reasons:
      - hard_stop
      - tech_hard_stop
      - tech_return_fail
      - tech_reversal_combo
      - tech_candle_reversal
      - tech_nwave_flip
      - rsi_fade
      - m1_rsi_fade
      - vwap_cut
      - m1_vwap_cut
      - atr_spike
      - m1_atr_spike
      - structure_break
      - m1_structure_break
      - reentry_reset
      - max_hold
      - max_adverse
      - lock_floor
      - time_stop
      - timeout
      - mtf_reversal
      - trend_failure
      - trend_exhaust
      - drawdown
      - max_drawdown
      - health_exit
      - hazard_exit
      - margin_health
      - free_margin_low
      - margin_usage_high
    deny_reasons: []
  min_profit_pips:
    macro: 1.2
    micro: 0.8
    scalp: 0.6
  be_profile:
    macro: {trigger_pips: 6.8, lock_ratio: 0.55, min_lock_pips: 2.6, cooldown_sec: 90}
    micro: {trigger_pips: 2.2, lock_ratio: 0.50, min_lock_pips: 0.60, cooldown_sec: 45}
    scalp: {trigger_pips: 1.6, lock_ratio: 0.35, min_lock_pips: 0.50, cooldown_sec: 20}
  start_delay_sec:
    micro: 25
    scalp: 12
  max_delay_sec:
    micro: 70
    scalp: 35
  tp_move:
    enabled: true
    macro: {trigger_pips: 6.0, buffer_pips: 2.5}
    micro: {trigger_pips: 2.0, buffer_pips: 1.0}
    scalp: {trigger_pips: 1.0, buffer_pips: 0.8}
  tp_move_min_gap_pips: 0.3

hold_until_profit:
  # Block closes for specific trades until they are in profit.
  # Matches are case-insensitive.
  client_order_ids:
    - "qr-1769197611427-hybrid-ImpulseRetrace-55c1d9c8f"
  trade_ids:
    - "181052"
  min_profit_pips: 0.0
  strict: false

strategies:
  TrendMA:
    min_profit_pips: 2.0
    be_profile: {trigger_pips: 7.0, lock_ratio: 0.60, min_lock_pips: 3.0, cooldown_sec: 90}
    tp_move: {trigger_pips: 7.5, buffer_pips: 3.0}
    neg_exit:
      allow_reasons:
        - hard_stop
        - tech_hard_stop
        - tech_return_fail
        - tech_reversal_combo
        - tech_candle_reversal
        - tech_nwave_flip
        - rsi_fade
        - vwap_cut
        - atr_spike
        - structure_break
        - trend_failure
        - trend_exhaust
        - drawdown
        - max_drawdown
        - health_exit
        - hazard_exit
        - margin_health
        - free_margin_low
        - margin_usage_high

  H1Momentum:
    be_profile: {trigger_pips: 6.5, lock_ratio: 0.55, min_lock_pips: 2.8, cooldown_sec: 80}
    tp_move: {trigger_pips: 7.0, buffer_pips: 2.8}
    neg_exit:
      allow_reasons:
        - hard_stop
        - tech_hard_stop
        - tech_return_fail
        - tech_reversal_combo
        - tech_candle_reversal
        - tech_nwave_flip
        - rsi_fade
        - vwap_cut
        - atr_spike
        - structure_break
        - trend_failure
        - trend_exhaust
        - drawdown
        - max_drawdown
        - health_exit
        - hazard_exit
        - margin_health
        - free_margin_low
        - margin_usage_high

  trend_h1:
    be_profile: {trigger_pips: 5.5, lock_ratio: 0.55, min_lock_pips: 2.4, cooldown_sec: 75}
    tp_move: {trigger_pips: 6.2, buffer_pips: 2.4}
    neg_exit:
      allow_reasons:
        - hard_stop
        - tech_hard_stop
        - tech_return_fail
        - tech_reversal_combo
        - tech_candle_reversal
        - tech_nwave_flip
        - rsi_fade
        - vwap_cut
        - atr_spike
        - structure_break
        - trend_failure
        - trend_exhaust
        - drawdown
        - max_drawdown
        - health_exit
        - hazard_exit
        - margin_health
        - free_margin_low
        - margin_usage_high

  LondonMomentum:
    be_profile: {trigger_pips: 5.8, lock_ratio: 0.55, min_lock_pips: 2.4, cooldown_sec: 70}
    tp_move: {trigger_pips: 6.2, buffer_pips: 2.6}

  manual_swing:
    be_profile: {trigger_pips: 6.0, lock_ratio: 0.55, min_lock_pips: 2.6, cooldown_sec: 90}
    tp_move: {trigger_pips: 6.8, buffer_pips: 2.8}

  BB_RSI:
    be_profile: {trigger_pips: 1.8, lock_ratio: 0.52, min_lock_pips: 0.60, cooldown_sec: 35}
    tp_move: {trigger_pips: 1.4, buffer_pips: 0.9}

  BB_RSI_Fast:
    be_profile: {trigger_pips: 1.6, lock_ratio: 0.55, min_lock_pips: 0.55, cooldown_sec: 30}
    tp_move: {trigger_pips: 1.2, buffer_pips: 0.8}

  MicroRangeBreak:
    be_profile: {trigger_pips: 1.8, lock_ratio: 0.50, min_lock_pips: 0.60, cooldown_sec: 35}
    tp_move: {trigger_pips: 1.5, buffer_pips: 0.9}

  MicroVWAPBound:
    be_profile: {trigger_pips: 1.6, lock_ratio: 0.55, min_lock_pips: 0.60, cooldown_sec: 35}
    tp_move: {trigger_pips: 1.4, buffer_pips: 0.9}
    neg_exit:
      allow_reasons:
        - reversion_*

  MomentumBurst:
    be_profile: {trigger_pips: 1.8, lock_ratio: 0.50, min_lock_pips: 0.60, cooldown_sec: 35}
    tp_move: {trigger_pips: 1.5, buffer_pips: 0.9}

  MicroLevelReactor:
    be_profile: {trigger_pips: 1.7, lock_ratio: 0.50, min_lock_pips: 0.60, cooldown_sec: 35}
    tp_move: {trigger_pips: 1.4, buffer_pips: 0.9}

  MicroPullbackEMA:
    be_profile: {trigger_pips: 2.0, lock_ratio: 0.48, min_lock_pips: 0.65, cooldown_sec: 40}
    tp_move: {trigger_pips: 1.6, buffer_pips: 1.0}

  MicroMomentumStack:
    be_profile: {trigger_pips: 2.2, lock_ratio: 0.45, min_lock_pips: 0.70, cooldown_sec: 45}
    tp_move: {trigger_pips: 1.8, buffer_pips: 1.1}

  TrendMomentumMicro:
    be_profile: {trigger_pips: 2.3, lock_ratio: 0.45, min_lock_pips: 0.70, cooldown_sec: 45}
    tp_move: {trigger_pips: 1.9, buffer_pips: 1.1}

  MicroVWAPRevert:
    be_profile: {trigger_pips: 1.6, lock_ratio: 0.55, min_lock_pips: 0.60, cooldown_sec: 35}
    tp_move: {trigger_pips: 1.3, buffer_pips: 0.9}
    neg_exit:
      allow_reasons:
        - reversion_*

  MomentumPulse:
    be_profile: {trigger_pips: 1.7, lock_ratio: 0.50, min_lock_pips: 0.60, cooldown_sec: 35}
    tp_move: {trigger_pips: 1.4, buffer_pips: 0.9}

  VolCompressionBreak:
    be_profile: {trigger_pips: 1.8, lock_ratio: 0.48, min_lock_pips: 0.60, cooldown_sec: 40}
    tp_move: {trigger_pips: 1.5, buffer_pips: 0.9}

  RangeFader:
    be_profile: {trigger_pips: 1.0, lock_ratio: 0.45, min_lock_pips: 0.40, cooldown_sec: 12}
    tp_move: {trigger_pips: 0.8, buffer_pips: 0.6}
    start_delay_sec: 8
    max_delay_sec: 20
    neg_exit:
      allow_reasons:
        - reversion_*

  PulseBreak:
    be_profile: {trigger_pips: 1.4, lock_ratio: 0.38, min_lock_pips: 0.45, cooldown_sec: 15}
    tp_move: {trigger_pips: 1.1, buffer_pips: 0.7}
    start_delay_sec: 10
    max_delay_sec: 25

  ImpulseRetrace:
    be_profile: {trigger_pips: 1.2, lock_ratio: 0.40, min_lock_pips: 0.45, cooldown_sec: 15}
    tp_move: {trigger_pips: 0.9, buffer_pips: 0.65}
    start_delay_sec: 10
    max_delay_sec: 25

  ImpulseRetraceScalp:
    be_profile: {trigger_pips: 1.2, lock_ratio: 0.40, min_lock_pips: 0.45, cooldown_sec: 15}
    tp_move: {trigger_pips: 0.9, buffer_pips: 0.65}
    start_delay_sec: 10
    max_delay_sec: 25

  M1Scalper:
    be_profile: {trigger_pips: 1.6, lock_ratio: 0.35, min_lock_pips: 0.50, cooldown_sec: 20}
    tp_move: {trigger_pips: 1.2, buffer_pips: 0.8}
    neg_exit:
      allow_reasons:
        - hard_stop
        - drawdown
        - max_drawdown
        - health_exit
        - hazard_exit
        - margin_health
        - free_margin_low
        - margin_usage_high
        - tech_hard_stop
        - fast_cut_*
        - time_cut
        - rsi_fade
        - m1_rsi_fade
        - vwap_cut
        - m1_vwap_cut
        - structure_break
        - m1_structure_break
        - m1_atr_spike
        - tech_reversal_combo
        - tech_nwave_flip
        - tech_candle_reversal
        - section_*
      deny_reasons:
        - tech_return_fail

  fast_scalp:
    be_profile: {trigger_pips: 1.2, lock_ratio: 0.40, min_lock_pips: 0.45, cooldown_sec: 12}
    tp_move: {trigger_pips: 0.9, buffer_pips: 0.6}

  OnePipMakerS1:
    be_profile: {trigger_pips: 0.9, lock_ratio: 0.45, min_lock_pips: 0.35, cooldown_sec: 10}
    tp_move: {trigger_pips: 0.7, buffer_pips: 0.5}

  pullback_s5:
    be_profile: {trigger_pips: 1.2, lock_ratio: 0.40, min_lock_pips: 0.45, cooldown_sec: 14}
    tp_move: {trigger_pips: 0.9, buffer_pips: 0.6}

  pullback_runner_s5:
    be_profile: {trigger_pips: 1.4, lock_ratio: 0.38, min_lock_pips: 0.45, cooldown_sec: 16}
    tp_move: {trigger_pips: 1.0, buffer_pips: 0.7}

  impulse_break_s5:
    be_profile: {trigger_pips: 1.5, lock_ratio: 0.38, min_lock_pips: 0.50, cooldown_sec: 16}
    tp_move: {trigger_pips: 1.1, buffer_pips: 0.7}

  impulse_retest_s5:
    be_profile: {trigger_pips: 1.3, lock_ratio: 0.40, min_lock_pips: 0.45, cooldown_sec: 15}
    tp_move: {trigger_pips: 1.0, buffer_pips: 0.7}

  impulse_momentum_s5:
    be_profile: {trigger_pips: 1.5, lock_ratio: 0.38, min_lock_pips: 0.50, cooldown_sec: 16}
    tp_move: {trigger_pips: 1.1, buffer_pips: 0.7}

  vwap_magnet_s5:
    be_profile: {trigger_pips: 1.1, lock_ratio: 0.45, min_lock_pips: 0.40, cooldown_sec: 12}
    tp_move: {trigger_pips: 0.9, buffer_pips: 0.6}
