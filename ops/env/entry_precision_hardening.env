# Entry precision hardening (2026-02-11)
# Goal: reduce low-quality/stale entries in micro/scalp pockets.

# Block entries when factor cache gets old more quickly.
ENTRY_FACTOR_MAX_AGE_SEC=300

# Do not allow stale-factor bypass for fast pockets.
# Keep manual and macro permissive to avoid excessive lockout.
ENTRY_FACTOR_STALE_ALLOW_POCKETS=manual,macro

# Microstructure gate: require fresher ticks.
ORDER_ENTRY_QUALITY_MICROSTRUCTURE_ENABLED=1
ORDER_ENTRY_QUALITY_MICROSTRUCTURE_WINDOW_SEC=30
ORDER_ENTRY_QUALITY_MICROSTRUCTURE_MAX_AGE_MS=3000
ORDER_ENTRY_QUALITY_MICROSTRUCTURE_MIN_SPAN_RATIO=0.8

# Previously 0.0 (effectively disabled) on VM.
# 0.35 tick/sec on 30s window ~= 11 ticks in recent 30s.
ORDER_ENTRY_QUALITY_MICROSTRUCTURE_MIN_TICK_DENSITY_MICRO=0.35

# Normal SL on fill: enable broker stopLossOnFill by pocket even when
# EXIT_NO_NEGATIVE_CLOSE=1.
ORDER_ENABLE_STOP_LOSS_MICRO=1
ORDER_ALLOW_STOP_LOSS_WITH_EXIT_NO_NEGATIVE_CLOSE_MICRO=1
ORDER_ENABLE_STOP_LOSS_SCALP=1
ORDER_ALLOW_STOP_LOSS_WITH_EXIT_NO_NEGATIVE_CLOSE_SCALP=1
ORDER_ENABLE_STOP_LOSS_MACRO=1
ORDER_ALLOW_STOP_LOSS_WITH_EXIT_NO_NEGATIVE_CLOSE_MACRO=1
